xlab = "Time in Since Start (months)",
ylab = "BMI")
ints$nonSeattle + slopes$nonSeattle*time
time <- 0:(6*12 - 1)
par(lend = 1)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "BMI",
lty = 1,
col = 'black',
lwd = 2)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "BMI",
type = 'l',
col = 'black',
lwd = 2)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "Mean BMI",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2)
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
abline(ints$nonSeattle, slopes$nonSeattle, lwd = 2, col = 'black')
lines(times[1:48],
ints$nonSeattle + slopes$nonSeattle*times[1:48],
col = 'black', lwd = 2)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "Mean BMI",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2)
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(times[1:48],
ints$nonSeattle + slopes$nonSeattle*times[1:48],
col = 'black', lwd = 2)
times
lines(time[1:48],
ints$nonSeattle + slopes$nonSeattle*time[1:48],
col = 'black', lwd = 2)
ints
lines(time[48:72],
ints$nonSeattle + ints$PostTax +
slopes$nonSeattle*time[48:72],
col = 'black', lty = 2, lwd = 2)
lines(time[1:48],
ints$Seattle + slopes$Seattle*time[1:48],
col = 'firebrick', lwd = 2)
lines(time[48:72],
ints$Seattle + ints$PostTax +
(slopes$Seattle + slopes$PostSea)*time[48:72],
col = 'firebrick', lty = 2, lwd = 2)
slopes
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference in Trends",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2,
main = "Linear Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 24),
col = 'black', lty = 2, lwd = 2)
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-1, 1),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
- ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-4, 4),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 4, 4),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax)), 25),
col = 'black', lty = 2, lwd = 2)
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax), 25),
col = 'black', lty = 2, lwd = 2)
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
- ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-5, 5),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 4, 4),
border = FALSE, col = 'grey83')
rep(ints$Seattle + slopes$Seattle -
- ints$nonSeattle - slopes$nonSeattle,1)
ints$Seattle
ints$nonSeattle
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-5, 5),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 4, 4),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax), 25),
col = 'black', lty = 2, lwd = 2)
par(mfrow = c(2,2), lend = 1)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "Mean BMI",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2,
main = "Linear Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[1:48],
ints$nonSeattle + slopes$nonSeattle*time[1:48],
col = 'black', lwd = 2)
lines(time[48:72],
ints$nonSeattle + ints$PostTax +
(slopes$nonSeattle + slopes$PostTax)*time[48:72],
col = 'black', lty = 2, lwd = 2)
lines(time[1:48],
ints$Seattle + slopes$Seattle*time[1:48],
col = 'firebrick', lwd = 2)
lines(time[48:72],
ints$Seattle + ints$PostTax -
(slopes$Seattle + slopes$PostSea)*time[48:72],
col = 'firebrick', lty = 2, lwd = 2)
## Differences
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-4,0),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 0, 0),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax), 25),
col = 'black', lty = 2, lwd = 2)
## Differences in Trends
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-1, 1),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in Trends")
polygon(c(48, 72, 72, 48), y = c(-1, -1, 1, 1),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(NA,
xlim = c(0,1),
ylim = c(0,1),
xlab = "",
ylab = "",
axes = FALSE)
legend('center',
bty = 'n',
border = FALSE,
fill = c("firebrick", "black", "grey83"),
legend = c("Seattle", "non-Seattle", "Post-Tax"))
par(mfrow = c(2,2), lend = 1)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "Mean BMI",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2,
main = "Linear Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[1:48],
ints$nonSeattle + slopes$nonSeattle*time[1:48],
col = 'black', lwd = 2)
lines(time[48:72],
ints$nonSeattle + ints$PostTax +
(slopes$nonSeattle + slopes$PostTax)*time[48:72],
col = 'black', lty = 2, lwd = 2)
lines(time[1:48],
ints$Seattle + slopes$Seattle*time[1:48],
col = 'firebrick', lwd = 2)
lines(time[48:72],
ints$Seattle + ints$PostTax -
(slopes$Seattle + slopes$PostSea)*time[48:72],
col = 'firebrick', lty = 2, lwd = 2)
## Differences
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-4,0),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 0, 0),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax), 25),
col = 'black', lty = 2, lwd = 2)
## Differences in Trends
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-1, 1),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in Trends")
polygon(c(48, 72, 72, 48), y = c(-1, -1, 1, 1),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(NA,
xlim = c(0,1),
ylim = c(0,1),
xlab = "",
ylab = "",
axes = FALSE)
legend('center',
bty = 'n',
border = FALSE,
fill = c("firebrick", "black", "grey83"),
legend = c("Seattle", "non-Seattle", "Post-Tax"))
ints <- data.frame(nonSeattle = 29,
Seattle = 26,
PostTax = 0.25)
slopes <- data.frame(nonSeattle = 0.05,
Seattle = 0.05,
PostTax = 0,
PostSea = -0.005)
time <- 0:(6*12 - 1)
pdf(paste0("FourSlopes_", write.yyyy.mm.dd,
".pdf"), width = 8, height = 8)
par(mfrow = c(2,2), lend = 1)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "Mean BMI",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2,
main = "Linear Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[1:48],
ints$nonSeattle + slopes$nonSeattle*time[1:48],
col = 'black', lwd = 2)
lines(time[48:72],
ints$nonSeattle + ints$PostTax +
(slopes$nonSeattle + slopes$PostTax)*time[48:72],
col = 'black', lty = 2, lwd = 2)
lines(time[1:48],
ints$Seattle + slopes$Seattle*time[1:48],
col = 'firebrick', lwd = 2)
lines(time[48:72],
ints$Seattle + ints$PostTax -
(slopes$Seattle + slopes$PostSea)*time[48:72],
col = 'firebrick', lty = 2, lwd = 2)
## Differences
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-4,0),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 0, 0),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax), 25),
col = 'black', lty = 2, lwd = 2)
## Differences in Trends
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-1, 1),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in Trends")
polygon(c(48, 72, 72, 48), y = c(-1, -1, 1, 1),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(NA,
xlim = c(0,1),
ylim = c(0,1),
xlab = "",
ylab = "",
axes = FALSE)
legend('center',
bty = 'n',
border = FALSE,
fill = c("firebrick", "black", "grey83"),
legend = c("Seattle", "non-Seattle", "Post-Tax"))
dev.off()
ints <- data.frame(nonSeattle = 29,
Seattle = 26,
PostTax = 0.25)
slopes <- data.frame(nonSeattle = 0.05,
Seattle = 0.05,
PostTax = 0,
PostSea = -0.001)
time <- 0:(6*12 - 1)
pdf(paste0("FourSlopes_", write.yyyy.mm.dd,
".pdf"), width = 8, height = 8)
par(mfrow = c(2,2), lend = 1)
plot(time,
ints$nonSeattle + slopes$nonSeattle*time,
xlab = "Time in Since Start (months)",
ylab = "Mean BMI",
ylim = c(24, 35),
type = 'l',
col = 'black',
lwd = 2,
main = "Linear Trends")
polygon(c(48, 72, 72, 48), y = c(24, 24, 35, 35),
border = FALSE, col = 'grey83')
lines(time[1:48],
ints$nonSeattle + slopes$nonSeattle*time[1:48],
col = 'black', lwd = 2)
lines(time[48:72],
ints$nonSeattle + ints$PostTax +
(slopes$nonSeattle + slopes$PostTax)*time[48:72],
col = 'black', lty = 2, lwd = 2)
lines(time[1:48],
ints$Seattle + slopes$Seattle*time[1:48],
col = 'firebrick', lwd = 2)
lines(time[48:72],
ints$Seattle + ints$PostTax -
(slopes$Seattle + slopes$PostSea)*time[48:72],
col = 'firebrick', lty = 2, lwd = 2)
## Differences
plot(time[1:48],
rep(ints$Seattle + slopes$Seattle -
ints$nonSeattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-4,0),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in BMI")
polygon(c(48, 72, 72, 48), y = c(-4, -4, 0, 0),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(ints$Seattle + ints$PostTax + slopes$Seattle + slopes$PostSea -
(ints$nonSeattle + ints$PostTax + slopes$nonSeattle + slopes$PostTax), 25),
col = 'black', lty = 2, lwd = 2)
## Differences in Trends
plot(time[1:48],
rep(slopes$Seattle - slopes$nonSeattle, 48),
xlab = "Time in Since Start (months)",
ylab = "Difference",
xlim = c(0, 72),
ylim = c(-1, 1),
type = 'l',
col = 'black',
lwd = 2,
main = "Difference in Trends")
polygon(c(48, 72, 72, 48), y = c(-1, -1, 1, 1),
border = FALSE, col = 'grey83')
lines(time[48:72],
rep(slopes$nonSeattle + slopes$PostTax -
(slopes$Seattle + slopes$PostSea), 25),
col = 'black', lty = 2, lwd = 2)
plot(NA,
xlim = c(0,1),
ylim = c(0,1),
xlab = "",
ylab = "",
axes = FALSE)
legend('center',
bty = 'n',
border = FALSE,
fill = c("firebrick", "black", "grey83"),
legend = c("Seattle", "non-Seattle", "Post-Tax"))
dev.off()
?rbinom
ex <- data.frame(hh_size = 1:7,prob = c(1, rep(.5, 6)))
ex
dat <- data.frame(id = 1:3, hh_size = c(1, 4, 6), hh = rep(0,3))
dat
prob_idx <- match(dat$hh_size, ex$hh_size)
prob_idz
prob_idx
rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
ex$prob[prob_idx]
rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
dat$hh_fixed <- rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
dat
prob_idx <- match(dat$hh_size[dat$hh == 0], ex$hh_size)
dat$hh[1] <- 1
prob_idx <- match(dat$hh_size[dat$hh == 0], ex$hh_size)
prob_idx
dat$hh_fixed[dat$hh == 0] <- rbinom(n = 3, size = 1, prob = ex$prob[prob_idx])
dat$hh_fixed[dat$hh == 0] <- rbinom(n = length(prob_idx), size = 1, prob = ex$prob[prob_idx])
rm(list = ls())
setwd("~/Dropbox/PHI2021/Github/PHI-2021/Tool/")
library(shiny)
runApp()
output
output$map
runApp()
runApp()
?quantile
?colorQuantile
